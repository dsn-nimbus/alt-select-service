"use strict";!function(e){e.module("alt.select-service",[]).service("AltSelectService",["$timeout","$compile",function(t,n){var a=33;this.inicializar=function(e,n){t(function(){$(e).select2(n)},a)},this.inicializarComOpcaoCriarNovo=function(o,i,c){function s(e,o,i,c,s){l()&&(t(function(){r="alt-select2-id-criar-novo-"+Date.now(),$("#"+i).parent().append(n(angular.element(c))(s.escopo)),$("#"+e).on("click",function(){$(o).select2("close")})},a),u=!0)}function l(){return!u}if(!e.isObject(i))throw new TypeError("O segundo parâmetro deve ser um objeto.");if(!i.strMetodo)throw new TypeError("A primeira propriedade do objeto deve ser strMetodo.");if(!i.escopo)throw new TypeError("A segunda propriedade do objeto deve ser escopo.");var r,d,p="alt-select2-id-msg-base",u=!1,f=!1,b=!1,m='\n        <div>\n          <span>Nenhum resultado encontrado...</span>\n          <a style="color: #6e3076;" class="alt-espacamento-left alt-select-botao-criacao-entidade" id="'+p+'"\n                  ng-click="'+i.strMetodo+'">\n                  <i class="fa fa-plus-circle alt-hand" aria-hidden="true"></i>\n                  <strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar Novo</strong>\n          </a>\n        </div>',v='\n          <div>\n            <ul style="padding-left: 10px;" class=\'alt-espacamento-top alt-cor-principal select2-cor-opcao-criar-novo alt-hand\' ng-click="'+i.strMetodo+'" id="'+r+'">\n              <i class="fa fa-plus-circle" aria-hidden="true"></i>\n              <a class="select2-cor-opcao-criar-novo"><strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar Novo</strong></a>\n            </ul>\n          </div>',g=e.extend(c,{language:{noResults:function(){f=!0;var e=n(angular.element(m))(i.escopo);return $(e).find("#"+p).on("click",function(){$(o).select2("close")}),e}},escapeMarkup:function(e){return e}});t(function(){$(o).select2(g)},a),$(o).off("select2:open"),$("#"+d).off("input"),$(o).on("select2:open",function(){if(t(function(){s(r,o,d,v,i)}.bind(this),a),0==b){var e=1;$(".select2-search__field").each(function(){d="alt-select2-id-campo-pesquisa-"+parseInt(Date.now()+e),$(this).attr("id",d),e++}),$("#"+d).on("input",function(){return f?($(".select2-cor-opcao-criar-novo").remove(),u=!1,f=!1):(s(r,o,d,v,i),void(u=!0))}.bind(this)),$(o).on("select2:close",function(){$("#"+r).remove()}),b=!0}}.bind(this))},this.inicializarComAcoes=function(o,i,c){if(!e.isObject(i))throw new TypeError("O segundo parâmetro deve ser um objeto.");if(!i.escopo)throw new TypeError("A propriedade escopo é obrigatória nas opções.");var s,l="alt-select2-id-msg-base",r="\n        <div>\n          <span>Nenhum resultado encontrado...</span>\n          "+(i.criar?'\n            <a style="color: #6e3076;" class="alt-espacamento-left alt-select-botao-criacao-entidade" id="'+l+'"\n              ng-click="'+i.criar.metodo+'">\n              <i class="fa fa-plus-circle alt-hand" aria-hidden="true"></i>\n              <strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar novo</strong>\n            </a>':"")+"\n        </div>",d=e.extend(c,{language:{noResults:function(){_naoTemResultadoSelect=!0;var e=n(angular.element(r))(i.escopo);return $(e).find("#"+l).on("click",function(){$(o).select2("close")}),e}},escapeMarkup:function(e){return e}});t(function(){$(o).select2(d),t(function(){$(o).next(".select2").addClass("alt-select2-with-actions"),$(o).next(".select2").find(".selection .select2-selection .select2-selection__arrow").remove(),$(o).next(".select2").find(".selection .select2-selection .alt-btn-select2-wrap-ations").remove(),$(o).next(".select2").find(".selection .select2-selection").append('<div class="alt-select2-wrap-ations"></div>'),!i.limpar||$(o).next(".select2").find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button class="btn btn-default alt-btn-select2 alt-btn-select2-2"\n              data-original-title="Limpar"\n              tabindex="-1"\n              onclick="$(\''+o+"').select2('close'); $('"+o+"').select2('val', '');\">\n              <i class=\"fa fa-ban\"></i>\n              </button>"))(i.escopo)),!i.criar||$(o).next(".select2").find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button class="btn btn-default alt-btn-select2"\n              data-original-title="Criar&nbsp;novo"\n              tabindex="-1"\n              ng-click="'+i.criar.metodo+'">\n              <i class="fa fa-plus"></i>\n              </button>'))(i.escopo)),!i.editar||$(o).next(".select2").find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button class="btn btn-default alt-btn-select2 alt-btn-select2-2"\n              data-original-title="Editar"\n              tabindex="-1"\n              ng-click="'+i.editar.metodo+'"\n              ng-show="'+i.editar.exibe+'">\n              <i class="fa fa-pencil"></i>\n              </button>'))(i.escopo)),$(o).next(".select2").find(".alt-select2-wrap-ations").append('<span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t(function(){$(".alt-btn-select2").tooltip()},a)},a)},a),$(o).off("select2:open"),$("#"+s).off("input")},this.abrir=function(e,n){t(function(){$(e).select2("open",n)},a)},this.fechar=function(e){t(function(){$(e).select2("close")},a)},this.obterConteudoBusca=function(e){return $(e).data("select2").$dropdown.find("input").val()}}])}(angular);