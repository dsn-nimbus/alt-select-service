"use strict";!function(e){e.module("alt.select-service",[]).service("AltSelectService",["$timeout","$compile",function(t,n){var a=33;this.inicializar=function(e,n){t(function(){$(e).select2(n)},a)},this.inicializarComOpcaoCriarNovo=function(o,i,c){function l(e,o,i,c,l){s()&&(t(function(){r="alt-select2-id-criar-novo-"+Date.now(),$("#"+i).parent().append(n(angular.element(c))(l.escopo)),$("#"+e).on("click",function(){$(o).select2("close")})},a),p=!0)}function s(){return!p}if(!e.isObject(i))throw new TypeError("O segundo parâmetro deve ser um objeto.");if(!i.strMetodo)throw new TypeError("A primeira propriedade do objeto deve ser strMetodo.");if(!i.escopo)throw new TypeError("A segunda propriedade do objeto deve ser escopo.");var r,d,u="alt-select2-id-msg-base",p=!1,f=!1,b=!1,v='\n        <div>\n          <span>Nenhum resultado encontrado...</span>\n          <a style="color: #6e3076;" class="alt-espacamento-left alt-select-botao-criacao-entidade" id="'+u+'"\n                  ng-click="'+i.strMetodo+'">\n                  <i class="fa fa-plus-circle alt-hand" aria-hidden="true"></i>\n                  <strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar Novo</strong>\n          </a>\n        </div>',m='\n          <div>\n            <ul style="padding-left: 10px;" class=\'alt-espacamento-top alt-cor-principal select2-cor-opcao-criar-novo alt-hand\' ng-click="'+i.strMetodo+'" id="'+r+'">\n              <i class="fa fa-plus-circle" aria-hidden="true"></i>\n              <a class="select2-cor-opcao-criar-novo"><strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar Novo</strong></a>\n            </ul>\n          </div>',g=e.extend(c,{language:{noResults:function(){f=!0;var e=n(angular.element(v))(i.escopo);return $(e).find("#"+u).on("click",function(){$(o).select2("close")}),e}},escapeMarkup:function(e){return e}});t(function(){$(o).select2(g)},a),$(o).off("select2:open"),$("#"+d).off("input"),$(o).on("select2:open",function(){if(t(function(){l(r,o,d,m,i)}.bind(this),a),0==b){var e=1;$(".select2-search__field").each(function(){d="alt-select2-id-campo-pesquisa-"+parseInt(Date.now()+e),$(this).attr("id",d),e++}),$("#"+d).on("input",function(){return f?($(".select2-cor-opcao-criar-novo").remove(),p=!1,f=!1):(l(r,o,d,m,i),void(p=!0))}.bind(this)),$(o).on("select2:close",function(){$("#"+r).remove()}),b=!0}}.bind(this))},this.inicializarComAcoes=function(o,i,c){if(!e.isObject(i))throw new TypeError("O segundo parâmetro deve ser um objeto.");if(!i.escopo)throw new TypeError("A propriedade escopo é obrigatória nas opções.");var l="alt-select2-id-msg-base",s="\n        <div>\n          <span>Nenhum resultado encontrado...</span>\n          "+(i.criar?'\n            <a style="color: #6e3076;" class="alt-espacamento-left alt-select-botao-criacao-entidade" id="'+l+'"\n              ng-click="'+i.criar.metodo+'">\n              <i class="fa fa-plus-circle alt-hand" aria-hidden="true"></i>\n              <strong class=\'alt-select-botao-abrir-modal alt-hand\'>Criar novo</strong>\n            </a>':"")+"\n        </div>",r=e.extend(c,{language:{noResults:function(){_naoTemResultadoSelect=!0;var e=n(angular.element(s))(i.escopo);return $(e).find("#"+l).on("click",function(){$(o).select2("close")}),e}},escapeMarkup:function(e){return e}});t(function(){$(o).select2(r),t(function(){var e=$(o).next(".select2");e.addClass("alt-select2-with-actions"),0<e.find(".selection .alt-btn-select2-wrap-ations").length?e.find(".selection .alt-btn-select2-wrap-ations button").remove():(e.find(".selection .alt-btn-select2-wrap-ations").remove(),e.find(".selection").append('<div class="alt-select2-wrap-ations"></div>'));var c=0;!i.limpar||(c++,e.find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button type="button" class="btn btn-default alt-btn-select2"\n                data-original-title="Limpar"\n                tabindex="-1"\n                onclick="$(\''+o+"').select2('val', '');\">\n                <i class=\"fa fa-ban\"></i>\n              </button>"))(i.escopo))),!i.criar||(c++,e.find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button type="button" class="btn btn-default alt-btn-select2"\n                data-original-title="Criar&nbsp;novo"\n                tabindex="-1"\n                ng-click="'+i.criar.metodo+'"\n                ng-disabled="'+i.criar.desabilitado+'">\n                <i class="fa fa-plus"></i>\n              </button>'))(i.escopo))),!i.editar||(c++,e.find(".alt-select2-wrap-ations").append(n(angular.element('\n              <button type="button" class="btn btn-default alt-btn-select2"\n                data-original-title="Editar"\n                tabindex="-1"\n                ng-click="'+i.editar.metodo+'"\n                ng-disabled="'+i.editar.desabilitado+'">\n                <i class="fa fa-pencil"></i>\n              </button>'))(i.escopo))),e.find(".selection .select2-selection").addClass("alt-select2-padding-"+c),t(function(){$(e.find(".alt-btn-select2")).tooltip()},a)},a)},a)},this.abrir=function(e,n){t(function(){$(e).select2("open",n)},a)},this.fechar=function(e){t(function(){$(e).select2("close")},a)},this.obterConteudoBusca=function(e){return $(e).data("select2").$dropdown.find("input").val()}}])}(angular);